var EntrevistaCandidato_view = Backbone.View.extend({
    el: 'body',
    defaults: {
    }
    ,events:{
        "click .asignar_horario": "f_activarAreaHorario",
        "click .btn_guardar_entrevista": "f_guardarHorarioEntrevista"
    },
    initialize: function(e){        
        try {
            var _this = this;
            
        }catch(exception){
            console.log(exception);
        }
    },
    f_guardarHorarioEntrevista: function(e){
        var _this = this;
        lo_itemSeleccionado = $(".horario_asignado");
        if(lo_itemSeleccionado.length == 0){
            $(".asignar_horario").addClass("border-left-error");
            swal("¡Atención!", "Seleccione un horario para continuar", "warning");
            return -1;
        }
        $(".asignar_horario").removeClass("border-left-error");
        
        ls_id_entrevista = $(lo_itemSeleccionado).parent().data("ii");;
        var la_dataCollection = {
            "id_entrevista": ls_id_entrevista
        };
                
        _this.model.f_guardarHorarioEntrevistaModel(la_dataCollection).done(function (response){
            if(response.return < 0){
                swal("¡Atención!", response.mensaje, "error");
                return -1;
            }
            
            swal("¡Bien hecho!", "Se agendó correctamente su entrevista.", "success");
            setTimeout(function(){ location.reload(); }, 2000);
        });
    },
    f_activarAreaHorario: function(e){
        var _this = this;
        lo_currentItem = e.currentTarget;
        $(".asignar_horario").removeClass("horario_asignado");
        $(lo_currentItem).addClass("horario_asignado");
    }
});

$(document).ready(function () {
    EntrevistaCandidato_view = new EntrevistaCandidato_view({model: new EntrevistaCandidato_model()});    
});