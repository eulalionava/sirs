var clientes_view = Backbone.View.extend({
    el: 'body',
    defaults: {
        content_page: "#content_page",
        idcliente:  "#txtID",
        cliente:    "#txtCliente",
        descripcion:"#txtDescripcion",
        rfc:        "#txtRFC"
    },
    events:{
        // "click .tableCliente": "f_catalogoCliente",
        "click .btnConsultar": "f_consultarCliente",
        "click .btnEditar"   : "f_editarCliente",
        "click .btnEliminar" : "f_eliminarCliente",
        "click .btnGuardar"  : "f_guardarCliente",
        "click .btnCampaniaConsultar"   : "f_consultarCampania",
        "click .btnCampaniaEditar"      : "f_editarCampania",
        "click .btnCampaniaEliminar"    : "f_eliminarCampania",
        "click .btnGuardarCampania"     : "f_guardarcampania"

        
    },
    initialize: function(e){
        try {
            
        }catch(exception){
            console.log(exception);
        }
    },
    f_catalogoCliente:function(e){
        var _this = this;

        var id = $('.tableCliente').find('td:eq(0)').html();
        var id_aplicativo = $('.tableCliente').find('td:eq(1)').html();

       _this.model.f_detalleCliente(id,id_aplicativo).done( function(response){
        $(_this.defaults.content_page).html(response.contenido);
        
       });
    },
    
    f_consultarCliente:function(e){
        var _this = this;

        var id = $('.tableCliente').find('td:eq(0)').html();
        var id_aplicativo = $('.tableCliente').find('td:eq(1)').html();

       _this.model.f_detalleCliente(id,id_aplicativo).done( function(response){
        $(_this.defaults.content_page).html(response.contenido);
       });
    },
    f_editarCliente:function(e){

        var _this = this;

        var id = $('.tableCliente').find('td:eq(0)').html();
        var id_aplicativo = $('.tableCliente').find('td:eq(1)').html();

       _this.model.f_editarCliente(id,id_aplicativo).done( function(response){
            $(_this.defaults.content_page).html(response.contenido);
        });
    },

    f_eliminarCliente:function(e){
        swal({   
            title: "¿Esta seguro?",   
            text: "Que desea, elimnar el registro de este cliente !!",   
            type: "warning",   
            showCancelButton: true,   
            confirmButtonColor: "#DD6B55",   
            confirmButtonText: "Confirmar",   
            closeOnConfirm: false 
        }, function(response){ 

            if(response) {
                swal("correcto","Cliente eliminado correctamente","success");
            } else {
                swal("Cancelado correctamente");
            }

        });
    },

    f_guardarCliente:function(e){
        var _this = this;

        data = {
            id          :   $(_this.defaults.idcliente).val(),
            cliente     :   $(_this.defaults.cliente).val(),
            descripcion :   $(_this.defaults.descripcion).val(),
            rfc         :   $(_this.defaults.rfc).val()
        }

        _this.model.f_guardarCliente(data).done( function(response){
            console.log(response);
            if(response.ok){
                swal("OK",response.message,"success");
                location.href = BASE_URL+'admon-clientes/catalogo-cliente/11';
            }else{
                swal("Atención!!","No se pudieron realizar los cambios,favor de verificar","error");
            }
        });
    },

    f_consultarCampania:function(e){
        var _this = this;

        var id = $('.tableCampania').find('td:eq(0)').html();
        var id_aplicativo = $('.tableCampania').find('td:eq(1)').html();

       _this.model.f_detalleCampania(id,id_aplicativo).done( function(response){
        $(_this.defaults.content_page).html(response.contenido);

       });

    },

    f_editarCampania:function(e){

        var _this = this;

        var id              = $('.tableCampania').find('td:eq(0)').html();
        var id_aplicativo   = $('.tableCampania').find('td:eq(1)').html();

       _this.model.f_editarCampania(id,id_aplicativo).done( function(response){
        $(_this.defaults.content_page).html(response.contenido);
        
       });

    },

    f_eliminarCampania:function(e){
        swal({   
            title: "¿Esta seguro?",   
            text: "Que desea, elimnar el registro de esta campaña !!",   
            type: "warning",   
            showCancelButton: true,   
            confirmButtonColor: "#DD6B55",   
            confirmButtonText: "Confirmar",   
            closeOnConfirm: false 
        }, function(response){ 

            if(response) {
                swal("correcto","Campaña eliminada correctamente","success");
            } else {
                swal("Cancelado correctamente");
            }

        });
    },
    f_guardarcampania:function(e){
        datos = {
            id          :   $("#txtIdCamp").val(),
            campania   :   $("#txtCampaniaCamp").val(),
            descripcion :   $("#txtDescripcionCamp").val()
        }

        this.model.f_guardarCampania(datos).done( function(response){
            console.log(response);
            if(response.ok){
                
                swal("OK",response.message,"success")
                location.href = BASE_URL+'admon-clientes/catalago-campania/12';

            }else{
                swal("Atención!!","No se pudieron realizar los cambios,favor de verificar","error");
            }
        });
    }


});

$(document).ready(function () {
    clientes_view = new clientes_view({model: new Clientes_model()});
    
});