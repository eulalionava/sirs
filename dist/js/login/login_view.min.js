var Login_view = Backbone.View.extend({
    el: 'body',
    defaults: {
        usuario: "#usuario",
        password: "#password"
    }
    ,events:{
        "keyup .input_login": "f_iniciarSesionValida",
        "click #btnIniciarSesion": "f_iniciarSesion"
    },
    initialize: function(e){
        try {
            
        }catch(exception){
            console.log(exception);
        }
    },
    f_iniciarSesionValida: function(e){
        var _this = this;
        if(f_validarEnter(e)){
            _this.f_iniciarSesion();
        }
    },
    f_iniciarSesion: function(e){
        var _this = this;
        var la_dataCollection = {};
        ls_usuario = $(_this.defaults.usuario).val();
        if(ls_usuario.length == 0){
            swal("¡Atención!", "Ingrese su usuario para continuar.", "warning");
            return -1;
        }
        
        ls_password = $(_this.defaults.password).val();
        if(ls_password.length == 0){
            swal("¡Atención!", "Ingrese su contraseña para continuar.", "warning");
            return -1;
        }

        la_dataCollection = {
            usuario: ls_usuario,
            password: ls_password
        }

        _this.model.f_iniciarSesionModel(la_dataCollection).done(function (response){
            if(response.return < 0){
                swal("¡Error!", "Ocurrió un error inesperado, favor de contactar a sistemas.", "error");
                return -1;
            }

            if(response.login){
                location.href = 'panel-principal';
            }else{
                swal("¡Atención!", response.mensaje, "error");
                return -1;
            }
        });
        return 1;
    }
});

$(document).ready(function () {
    Login_view = new Login_view({model: new Login_model()});
});